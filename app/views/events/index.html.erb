<h1>Events</h1>

<%= link_to 'Evenement aanmaken', new_event_path %>

<ul>
  <% @events.each do |event| %>
    <li class='event' data-lon=<%= event.longitude %> data-lat=<%= event.latitude %>>
     <a href='#'><%= event.title %></a>
    </li>
  <% end %>
</ul>

<div id="map" class="map"></div>
<a href="#" class='reset_map'>Reset map</a>

<script type="text/javascript">
  var lon = 5.5
  var lat = 52
  var map = new ol.Map({
    target: 'map',
    layers: [
      new ol.layer.Tile({
        source: new ol.source.OSM()
      }),
      new ol.layer.Vector({
       title: 'event_locations',
       source: new ol.source.Vector({
         url: '/events.json',
         format: new ol.format.GeoJSON()
       }),
       style: new ol.style.Style({
         image: new ol.style.Circle({
           radius: 10,
           fill: new ol.style.Fill({color: 'red'})
         })
       })
     })
    ],
    view: new ol.View({
      center: ol.proj.transform([5.7, 52.2], 'EPSG:4326', 'EPSG:3857'),
      zoom: 7
    })
  });
</script>